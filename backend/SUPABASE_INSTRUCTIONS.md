# üìã –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—å –≤ Supabase Dashboard

## üéØ –ú–µ—Ç–∞
–°—Ç–≤–æ—Ä–∏—Ç–∏ 6 –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å Pizza System –≤ Supabase PostgreSQL –±–∞–∑—ñ –¥–∞–Ω–∏—Ö.

## üìç –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è
- **–ü—Ä–æ–µ–∫—Ç**: wncukuajzygzyasofyoe  
- **URL Dashboard**: https://supabase.com/dashboard/project/wncukuajzygzyasofyoe
- **SQL Editor**: https://supabase.com/dashboard/project/wncukuajzygzyasofyoe/sql/new

## üîÑ –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û: –í–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤ —Ç–æ—á–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É!

–ü—ñ—Å–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤–∏—è–≤–ª–µ–Ω–æ, —â–æ **users** –º–∞—î –±—É—Ç–∏ –ü–ï–†–®–û–Æ —Ç–∞–±–ª–∏—Ü–µ—é!

**–ü–†–ê–í–ò–õ–¨–ù–ò–ô –ü–û–†–Ø–î–û–ö:**

```
1. users (–ü–ï–†–®–ê! self-referencing FK)
2. products (–±–∞–∑–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è)
3. clients (–±–∞–∑–æ–≤–∞ —Ç–∞–±–ª–∏—Ü—è) 
4. production_settings (–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
5. production (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ products + users)
6. production_batches (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ products + production)
7. stock_movements (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ products + production_batches + users)
8. orders (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ clients + users)
9. order_items (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ orders + products)
10. writeoffs (–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ products + users)
```

## üìù –ü–æ–∫—Ä–æ–∫–æ–≤–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è

### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏—Ç–∏ Supabase Dashboard
1. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ https://supabase.com/dashboard/project/wncukuajzygzyasofyoe
2. –õ–æ–≥—ñ–Ω –≤ –∞–∫–∫–∞—É–Ω—Ç (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "SQL Editor" –≤ –ª—ñ–≤–æ–º—É –º–µ–Ω—é

### –ö—Ä–æ–∫ 2: üö®–ü–ï–†–®–ê –¢–ê–ë–õ–ò–¶–Ø - –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é users
1. –í SQL Editor –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ –≤–µ—Å—å –≤–º—ñ—Å—Ç —Ñ–∞–π–ª—É `migrations/supabase/001_create_users_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä
4. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "Run" –∞–±–æ Ctrl+Enter
5. ‚úÖ –ü–æ–≤–∏–Ω–Ω–æ –∑'—è–≤–∏—Ç–∏—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
6. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (username: admin, ID: 1)
7. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ self-referencing FK (created_by)

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é products
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/002_create_products_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ (5 —Ç–æ–≤–∞—Ä—ñ–≤)

### –ö—Ä–æ–∫ 4: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é clients  
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/003_create_clients_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ (5 –∫–ª—ñ—î–Ω—Ç—ñ–≤)

### –ö—Ä–æ–∫ 5: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é production_settings
1. –ù–æ–≤–∞ query: "New query"  
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/004_create_production_settings_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ singleton –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ö—Ä–æ–∫ 6: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é production
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/005_create_production_table.sql` 
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Å–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞

### –ö—Ä–æ–∫ 7: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é production_batches
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/006_create_production_batches_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ FIFO –ø–∞—Ä—Ç—ñ—ó

### –ö—Ä–æ–∫ 8: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é stock_movements
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/007_create_stock_movements_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∂—É—Ä–Ω–∞–ª —Ä—É—Ö—ñ–≤

### –ö—Ä–æ–∫ 9: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é orders
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/008_create_orders_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è

### –ö—Ä–æ–∫ 10: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é order_items  
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/009_create_order_items_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—ó –∑ JSONB allocated_batches

### –ö—Ä–æ–∫ 11: –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é writeoffs
1. –ù–æ–≤–∞ query: "New query"
2. –°–∫–æ–ø—ñ—é–≤–∞—Ç–∏ `migrations/supabase/010_create_writeoffs_table.sql`
3. –í—Å—Ç–∞–≤–∏—Ç–∏ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ "Run"
4. ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å–ø–∏—Å–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤

## üß™ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—Å—ñ—Ö —Ç–∞–±–ª–∏—Ü—å –∑–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –æ–∫—Ä–µ–º–∏—Ö —Ç–∞–±–ª–∏—Ü—å
node tests/supabase/test-products-table.js
node tests/supabase/test-clients-table.js  
node tests/supabase/test-stock-movements-table.js

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏ —Ä–∞–∑–æ–º
node tests/supabase/run-all-tests.js

# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞—Ç—É—Å
node migration-status.js
```

## ‚úÖ –ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É

–ü—ñ—Å–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫—Ä–æ–∫—ñ–≤ –ø–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏:
- ‚úÖ 6 —Ç–∞–±–ª–∏—Ü—å —Å—Ç–≤–æ—Ä–µ–Ω–æ –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –í—Å—ñ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –≤—Å—Ç–∞–≤–ª–µ–Ω—ñ
- ‚úÖ Foreign key constraints –ø—Ä–∞—Ü—é—é—Ç—å
- ‚úÖ –¢–µ—Å—Ç–∏ –ø–æ–∫–∞–∑—É—é—Ç—å 100% —É—Å–ø—ñ—à–Ω—ñ—Å—Ç—å
- ‚úÖ JSONB –ø–æ–ª—è –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –£–Ω—ñ–∫–∞–ª—å–Ω—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è –¥—ñ—é—Ç—å

## üö® –ú–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏

**–ü–æ–º–∏–ª–∫–∞ Foreign Key**: –Ø–∫—â–æ –∑'—è–≤–ª—è—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–æ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ—Å–∏–ª–∞–Ω–Ω—è
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —á–∏ –Ω–µ–º–∞—î –¥—Ä—É–∫–∞—Ä—Å—å–∫–∏—Ö –ø–æ–º–∏–ª–æ–∫ –≤ –Ω–∞–∑–≤–∞—Ö —Ç–∞–±–ª–∏—Ü—å

**–ü–æ–º–∏–ª–∫–∞ Unique Constraint**: –Ø–∫—â–æ —Ç–æ–≤–∞—Ä/–∫–ª—ñ—î–Ω—Ç –≤–∂–µ —ñ—Å–Ω—É—î
- ‚úÖ –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º—É –∑–∞–ø—É—Å–∫—É (DROP TABLE IF EXISTS —Å–ø—Ä–∞—Ü—é–≤–∞–≤)

**JSONB –ø–æ–º–∏–ª–∫–∏**: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å JSON —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É
- ‚úÖ –í—Å—ñ JSON –ø–æ–ª—è –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å –ø—Ä–æ–±–ª–µ–º–∏:
1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–∏–π –≤–µ—Å—å SQL –∫–æ–¥
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ç–µ—Å—Ç–∏ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –≤ Supabase Dashboard

**–ì–æ—Ç–æ–≤–æ! –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–æ–∂–Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–∏ –¥–æ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ç–∞–±–ª–∏—Ü—å (users, production, writeoffs —Ç–æ—â–æ)** üéâ