# üö® –ü—Ä–∞–≤–∏–ª–∞ –º—ñ–≥—Ä–∞—Ü—ñ—ó SQLite ‚Üí Supabase PostgreSQL

**–°—Ç–≤–æ—Ä–µ–Ω–æ**: 2025-07-25 –ø—ñ—Å–ª—è –∞–Ω–∞–ª—ñ–∑—É –ø–æ–º–∏–ª–æ–∫ —Ä–µ–∞–ª—å–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó  
**–ú–µ—Ç–∞**: –£–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ –º—ñ–≥—Ä–∞—Ü—ñ—ó —ñ–Ω—à–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤

---

## üéØ –ö—Ä–∏—Ç–∏—á–Ω—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö

### 1. Boolean –ø–æ–ª—è

| SQLite | Supabase | –ü—Ä–æ–±–ª–µ–º–∞ | –†—ñ—à–µ–Ω–Ω—è |
|--------|----------|----------|---------|
| `INTEGER (1/0)` | `BOOLEAN (true/false)` | Frontend —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –ª–∞–º–∞—î—Ç—å—Å—è | –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏ |

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ–±–ª–µ–º–∏**:
```javascript
// ‚ùå –ü—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –∑ SQLite
users.filter(user => user.active === 1)

// ‚úÖ –ü—Ä–∞—Ü—é—î –∑ –æ–±–æ–º–∞ –ë–î
users.filter(user => user.active === 1 || user.active === true)
```

### 2. JSON/JSONB –ø–æ–ª—è

| SQLite | Supabase | –ü—Ä–æ–±–ª–µ–º–∞ | –†—ñ—à–µ–Ω–Ω—è |
|--------|----------|----------|---------|
| `TEXT` –ø–æ—Ç—Ä–µ–±—É—î `JSON.parse()` | `JSONB` –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç | `JSON.parse()` –ª–∞–º–∞—î –æ–±'—î–∫—Ç | –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Ç–∏–ø –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å—ñ–Ω–≥–æ–º |

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ–±–ª–µ–º–∏**:
```javascript
// ‚ùå –õ–∞–º–∞—î—Ç—å—Å—è –≤ Supabase
permissions: JSON.parse(user.permissions || '{}')

// ‚úÖ –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è
permissions: typeof user.permissions === 'string' 
  ? JSON.parse(user.permissions || '{}') 
  : (user.permissions || {})
```

### 3. –î–∞—Ç–∏ —Ç–∞ —á–∞—Å

| SQLite | Supabase | –†—ñ–∑–Ω–∏—Ü—è |
|--------|----------|---------|
| `DATETIME` —è–∫ TEXT | `TIMESTAMP WITH TIME ZONE` | –§–æ—Ä–º–∞—Ç —Ç–∞ timezone |

---

## üîß –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π —á–µ–∫–ª–∏—Å—Ç –º—ñ–≥—Ä–∞—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É

### –ï—Ç–∞–ø 1: Backend —Å–µ—Ä–≤—ñ—Å

- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ queries —Ñ–∞–π–ª –¥–ª—è Supabase**
  - –ó–º—ñ–Ω–∏—Ç–∏ —Ç–∏–ø–∏ –ø–æ–ª—ñ–≤ (INTEGER‚ÜíBOOLEAN, TEXT‚ÜíJSONB)
  - –ê–¥–∞–ø—Ç—É–≤–∞—Ç–∏ SQL –∑–∞–ø–∏—Ç–∏ –¥–æ PostgreSQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å—É
  
- [ ] **–°—Ç–≤–æ—Ä–∏—Ç–∏ v2 —Å–µ—Ä–≤—ñ—Å –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –æ–±–æ—Ö –ë–î**
  - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ DatabaseAdapter
  - –î–æ–¥–∞—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Ç–∏–ø—ñ–≤ –¥–ª—è JSON/JSONB
  - –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏ boolean
  
- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ –æ–±–æ–º–∞ –ë–î**
  - –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ SQLite —Ä–µ–∂–∏–º—ñ
  - –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –Ω–∞ Supabase
  - –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –ï—Ç–∞–ø 2: API endpoints

- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π**
  - Boolean –ø–æ–ª—è –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ç–∏–ø
  - JSON –ø–æ–ª—è –∫–æ—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è
  - –î–∞—Ç–∏ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ

- [ ] **–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ cURL**
  - `USE_SUPABASE=false` ‚Üí —Ç–µ—Å—Ç SQLite
  - `USE_SUPABASE=true` ‚Üí —Ç–µ—Å—Ç Supabase
  - –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –ï—Ç–∞–ø 3: Frontend –∞–¥–∞–ø—Ç–∞—Ü—ñ—è

- [ ] **–ó–Ω–∞–π—Ç–∏ –≤—Å—ñ –º—ñ—Å—Ü—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ–ª—ñ–≤**
  - –ü–æ—à—É–∫ –ø–æ `user.active`, `item.enabled`, etc.
  - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—é —Ç–∞ —É–º–æ–≤–∏
  
- [ ] **–ê–¥–∞–ø—Ç—É–≤–∞—Ç–∏ boolean –ª–æ–≥—ñ–∫—É**
  - –ó–∞–º—ñ–Ω–∏—Ç–∏ `=== 1` –Ω–∞ `=== 1 || === true`
  - –ó–∞–º—ñ–Ω–∏—Ç–∏ `=== 0` –Ω–∞ `=== 0 || === false`
  
- [ ] **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ JSON –æ–±—Ä–æ–±–∫—É**
  - –í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–π–≤—ñ `JSON.parse()` —è–∫—â–æ backend –≤–∂–µ –ø–æ–≤–µ—Ä—Ç–∞—î –æ–±'—î–∫—Ç

---

## üö® –ù–∞–π—á–∞—Å—Ç—ñ—à—ñ –ø–æ–º–∏–ª–∫–∏

### 1. "Unexpected token o in JSON at position 1"
**–ü—Ä–∏—á–∏–Ω–∞**: –°–ø—Ä–æ–±–∞ `JSON.parse()` –Ω–∞ –æ–±'—î–∫—Ç—ñ –∑ Supabase  
**–†—ñ—à–µ–Ω–Ω—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ `typeof` –ø–µ—Ä–µ–¥ –ø–∞—Ä—Å—ñ–Ω–≥–æ–º

### 2. "–û—Ç—Ä–∏–º–∞–Ω–æ X –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤, –∑ –Ω–∏—Ö 0 –∞–∫—Ç–∏–≤–Ω–∏—Ö"
**–ü—Ä–∏—á–∏–Ω–∞**: Frontend —Ñ—ñ–ª—å—Ç—Ä—É—î –∑–∞ `=== 1`, –∞ Supabase –ø–æ–≤–µ—Ä—Ç–∞—î `true`  
**–†—ñ—à–µ–Ω–Ω—è**: –ü—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –æ–±–∏–¥–≤–∞ —Ñ–æ—Ä–º–∞—Ç–∏ –≤ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó

### 3. –ü–æ—Ä–æ–∂–Ω—ñ dropdown/—Å–ø–∏—Å–∫–∏
**–ü—Ä–∏—á–∏–Ω–∞**: –ó–º—ñ–Ω–∏–≤—Å—è —Ñ–æ—Ä–º–∞—Ç boolean –ø–æ–ª—ñ–≤  
**–†—ñ—à–µ–Ω–Ω—è**: –û–Ω–æ–≤–∏—Ç–∏ frontend –ª–æ–≥—ñ–∫—É

---

## üìã –û–±–æ–≤'—è–∑–∫–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É

### –í Backend –∫–æ–¥—ñ

```javascript
// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ JSON/JSONB
const permissions = typeof user.permissions === 'string' 
  ? JSON.parse(user.permissions || '{}') 
  : (user.permissions || {});

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ boolean
const useSupabase = process.env.USE_SUPABASE === 'true';
const activeValue = useSupabase ? true : 1;
const isActive = user.active === activeValue;
```

### –í Frontend –∫–æ–¥—ñ

```javascript
// ‚úÖ –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è boolean
const activeItems = items.filter(item => 
  item.active === 1 || item.active === true
);

// ‚úÖ –ë–µ–∑–ø–µ—á–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ boolean
const isActive = !!(item.active === 1 || item.active === true);
```

---

## üîÑ –ê–ª–≥–æ—Ä–∏—Ç–º —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º—ñ–≥—Ä–∞—Ü—ñ—ó

1. **–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ –≤ –æ–±–æ—Ö –ë–î**
2. **–ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤ SQLite —Ä–µ–∂–∏–º—ñ ‚Üí –∑–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏**
3. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –Ω–∞ Supabase ‚Üí –ø–æ—Ä—ñ–≤–Ω—è—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏**
4. **–¢–µ—Å—Ç—É–≤–∞—Ç–∏ frontend ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ UI**
5. **–¢–µ—Å—Ç—É–≤–∞—Ç–∏ API endpoints ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π**

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞

–ü–µ—Ä–µ–¥ —Ä–æ–±–æ—Ç–æ—é –∑ –Ω–æ–≤–∏–º —Å–µ—Ä–≤—ñ—Å–æ–º:

- [ ] –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ —Ü–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é
- [ ] –í–∏–∑–Ω–∞—á–∏—Ç–∏ –≤—Å—ñ boolean –ø–æ–ª—è –≤ —Å–µ—Ä–≤—ñ—Å—ñ
- [ ] –ó–Ω–∞–π—Ç–∏ –≤—Å—ñ JSON –ø–æ–ª—è –≤ —Å–µ—Ä–≤—ñ—Å—ñ  
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ frontend –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ü–∏—Ö –ø–æ–ª—ñ–≤
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤ –æ–±–æ—Ö —Ä–µ–∂–∏–º–∞—Ö –ë–î
- [ ] –û–Ω–æ–≤–∏—Ç–∏ —Ü–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –Ω–æ–≤–∏–º–∏ –∑–Ω–∞—Ö—ñ–¥–∫–∞–º–∏

---

**üéØ –ì–æ–ª–æ–≤–Ω–µ –ø—Ä–∞–≤–∏–ª–æ**: –ó–ê–í–ñ–î–ò —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ –æ–±–æ–º–∞ –ë–î —ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ frontend!

---

*–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –º—ñ–≥—Ä–∞—Ü—ñ—ó —Å–µ—Ä–≤—ñ—Å—É*