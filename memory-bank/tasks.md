# PIZZA SYSTEM - SUPABASE DATABASE MIGRATION
**Complexity Level:** 2 (Simple Enhancement)  
**Current Mode:** VAN (Analysis & Planning)  
**Status:** üîÑ –ê–Ω–∞–ª—ñ–∑—É—î–º–æ –ø–æ—Ç–æ—á–Ω—É —Å–∏—Å—Ç–µ–º—É –¥–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó –Ω–∞ Supabase

## üéØ –ó–ê–î–ê–ß–ê
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –±–∞–∑—É –¥–∞–Ω–∏—Ö –∑ SQLite –Ω–∞ Supabase –±–µ–∑ –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –ª–∏—à–Ω—ñ—Ö —Ñ—ñ—á. –ü—Ä–æ—Å—Ç–æ –∑—Ä–æ–±–∏—Ç–∏ –∫–æ–ø—ñ—é –ë–î —Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–∏ –≤—Å—ñ –º–∞—Ä—à—Ä—É—Ç–∏ –∑ SQL –Ω–∞ Supabase.

## üìã –ü–û–¢–û–ß–ù–ò–ô –°–¢–ê–ù –°–ò–°–¢–ï–ú–ò

### Database Structure (SQLite)
```
üìÇ backend/
‚îú‚îÄ‚îÄ pizza_inventory.db (440KB) - –æ—Å–Ω–æ–≤–Ω–∞ –ë–î
‚îú‚îÄ‚îÄ database.js (60KB, 1380 lines) - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ç–∞ –∑–∞–ø–∏—Ç–∏
‚îú‚îÄ‚îÄ services/ - 8 —Å–µ—Ä–≤—ñ—Å—ñ–≤ –∑ –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–æ—é
‚îî‚îÄ‚îÄ routes/ - API –º–∞—Ä—à—Ä—É—Ç–∏
```

### –û—Å–Ω–æ–≤–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ –≤ –ë–î:
1. **products** - —Ç–æ–≤–∞—Ä–∏ (–ø—ñ—Ü–∞)
2. **stock_movements** - —Ä—É—Ö–∏ —Å–∫–ª–∞–¥—É  
3. **clients** - –∫–ª—ñ—î–Ω—Ç–∏
4. **orders** - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
5. **order_items** - –ø–æ–∑–∏—Ü—ñ—ó –∑–∞–º–æ–≤–ª–µ–Ω—å
6. **writeoffs** - —Å–ø–∏—Å–∞–Ω–Ω—è
7. **production** - –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ
8. **production_plans** - –ø–ª–∞–Ω–∏ –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–∞
9. **production_plan_items** - –ø–æ–∑–∏—Ü—ñ—ó –ø–ª–∞–Ω—ñ–≤
10. **production_settings** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
11. **users** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ (–Ω–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó)
12. **user_sessions** - —Å–µ—Å—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
13. **user_audit** - –∞—É–¥–∏—Ç –¥—ñ–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤

### –°–µ—Ä–≤—ñ—Å–∏ (Services Layer):
- **authService.js** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
- **userService.js** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ  
- **productService.js** - —Ç–æ–≤–∞—Ä–∏
- **clientService.js** - –∫–ª—ñ—î–Ω—Ç–∏
- **orderService.js** - –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
- **productionService.js** - –≤–∏—Ä–æ–±–Ω–∏—Ü—Ç–≤–æ
- **writeoffService.js** - —Å–ø–∏—Å–∞–Ω–Ω—è
- **movementService.js** - —Ä—É—Ö–∏ —Å–∫–ª–∞–¥—É
- **permissionService.js** - –¥–æ–∑–≤–æ–ª–∏

## üîÑ –ü–õ–ê–ù –ú–Ü–ì–†–ê–¶–Ü–á –ù–ê SUPABASE

### –ï—Ç–∞–ø 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ Supabase –ø—Ä–æ–µ–∫—Ç—É
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ Supabase –ø—Ä–æ–µ–∫—Ç
- [ ] –û—Ç—Ä–∏–º–∞—Ç–∏ URL —ñ API –∫–ª—é—á—ñ
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

### –ï—Ç–∞–ø 2: –ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –∑ SQLite  
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–∫—Ä–∏–ø—Ç –µ–∫—Å–ø–æ—Ä—Ç—É –¥–∞–Ω–∏—Ö –∑ pizza_inventory.db
- [ ] –ó–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ —É JSON/CSV —Ñ–æ—Ä–º–∞—Ç—ñ
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –ï—Ç–∞–ø 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ö–µ–º–∏ –≤ Supabase
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—ñ –≤ Supabase (–∫–æ–ø—ñ—è SQLite —Å—Ö–µ–º–∏)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –∑–≤'—è–∑–∫–∏ –º—ñ–∂ —Ç–∞–±–ª–∏—Ü—è–º–∏
- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ñ–Ω–¥–µ–∫—Å–∏ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è

### –ï—Ç–∞–ø 4: –Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö –≤ Supabase
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –µ–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ –≤ Supabase
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å —ñ–º–ø–æ—Ä—Ç–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ –∑–∞–ø–∏—Ç–∏

### –ï—Ç–∞–ø 5: –û–Ω–æ–≤–ª–µ–Ω–Ω—è backend –∫–æ–¥—É
- [ ] –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ @supabase/supabase-js
- [ ] –ó–∞–º—ñ–Ω–∏—Ç–∏ database.js –Ω–∞ supabase client
- [ ] –û–Ω–æ–≤–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Supabase
- [ ] –û–Ω–æ–≤–∏—Ç–∏ API –º–∞—Ä—à—Ä—É—Ç–∏

### –ï—Ç–∞–ø 6: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ API endpoints
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ frontend —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–∏

### –ï—Ç–∞–ø 7: –î–µ–ø–ª–æ–π
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ backup –ø–æ—Ç–æ—á–Ω–æ—ó —Å–∏—Å—Ç–µ–º–∏
- [ ] –î–µ–ø–ª–æ–π –Ω–æ–≤–æ—ó –≤–µ—Ä—Å—ñ—ó –∑ Supabase
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ

## üìù –¢–ï–•–ù–Ü–ß–ù–Ü –î–ï–¢–ê–õ–Ü

### –ü–æ—Ç–æ—á–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:
```javascript
// –ü–æ—Ç–æ—á–Ω–∏–π database.js
const sqlite3 = require('sqlite3').verbose();
const db = new sqlite3.Database('pizza_inventory.db');

// –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É
function getAllProducts() {
    return new Promise((resolve, reject) => {
        db.all('SELECT * FROM products', (err, rows) => {
            if (err) reject(err);
            else resolve(rows);
        });
    });
}
```

### –¶—ñ–ª—å–æ–≤–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞:
```javascript
// –ù–æ–≤–∏–π supabase client
import { createClient } from '@supabase/supabase-js';
const supabase = createClient(SUPABASE_URL, SUPABASE_KEY);

// –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–ø–∏—Ç—É
async function getAllProducts() {
    const { data, error } = await supabase
        .from('products')
        .select('*');
    
    if (error) throw error;
    return data;
}
```

## üé≤ –ì–û–¢–û–í–ù–Ü–°–¢–¨ –î–û –°–¢–ê–†–¢–£
–ü–æ—Ç–æ—á–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∞:
- ‚úÖ –í—Å—ñ 8 –º–æ–¥—É–ª—ñ–≤ –ø—Ä–∞—Ü—é—é—Ç—å (100%)
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö —Å—Ç–∞–±—ñ–ª—å–Ω–∞
- ‚úÖ API endpoints –ø—Ä–æ—Ç–µ—Å—Ç–æ–≤–∞–Ω—ñ  
- ‚úÖ Frontend —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–∏–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—î

**–ì–æ—Ç–æ–≤—ñ —Ä–æ–∑–ø–æ—á–∞—Ç–∏ –º—ñ–≥—Ä–∞—Ü—ñ—é –Ω–∞ Supabase!** üöÄ
